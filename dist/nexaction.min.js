!function(){var CreateHandler=function CreateHandler(){var reflexes=[],remove=function remove(id){if("string"==typeof id){var index=reflexes.findIndex((function(e){return e.id===id}));index>=0&&reflexes.splice(index,1)}else if(Number.isInteger(id))reflexes.splice(id,1);else if(id instanceof RegExp){var _index=reflexes.findIndex((function(e){return e.reflex.source===id.source}));_index>=0&&reflexes.splice(_index,1)}};return{reflexes:reflexes,add:function add(_ref2){var regex=_ref2.regex,action=_ref2.action,_ref2$id=_ref2.id,id=void 0===_ref2$id?crypto.randomUUID():_ref2$id,_ref2$group=_ref2.group,group=void 0!==_ref2$group&&_ref2$group,_ref2$enabled=_ref2.enabled,enabled=void 0===_ref2$enabled||_ref2$enabled,_ref2$once=_ref2.once,once=void 0!==_ref2$once&&_ref2$once,_ref2$duration=_ref2.duration,duration=void 0!==_ref2$duration&&_ref2$duration;reflexes.push(function CreateTrigger(_ref){var regex=_ref.regex,action=_ref.action,id=_ref.id,group=_ref.group,enabled=_ref.enabled,once=_ref.once,duration=_ref.duration;return duration&&setTimeout((function(){globalThis.nexAction.triggers.remove(id)}),duration),{regex:regex,action:action,id:id||("action"!==action.name?action.name:regex.source),group:group,enabled:enabled,once:once}}({regex:regex,action:action,id:id,group:group,enabled:enabled,once:once,duration:duration}))},remove:remove,process:function process(text){for(var _i=0,_reflexes=reflexes;_i<_reflexes.length;_i++){var reflex=_reflexes[_i];if(!1!==reflex.enabled){var args=text.match(reflex.regex);if(args){try{reflex.action(args)}catch(error){console.log(null==reflex?void 0:reflex.group),console.log(reflex.regex),console.log(error)}var _reflex$id;if(reflex.once)remove(null!==(_reflex$id=reflex.id)&&void 0!==_reflex$id?_reflex$id:reflex.regex)}}}},clear:function clear(){reflexes.length=0},enable:function enable(id){var group=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];group?reflexes.filter((function(e){return e.group===id})).forEach((function(e){return e.enabled=!0})):reflexes.filter((function(e){return e.id===id})).forEach((function(e){return e.enabled=!0}))},disable:function disable(id){var group=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];group?reflexes.filter((function(e){return e.group===id})).forEach((function(e){return e.enabled=!1})):reflexes.filter((function(e){return e.id===id})).forEach((function(e){return e.enabled=!1}))}}};globalThis.nexAction={triggers:CreateHandler(),aliases:CreateHandler()}}();